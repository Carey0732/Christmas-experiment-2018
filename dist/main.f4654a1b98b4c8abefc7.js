webpackJsonp([0],[,function(e,t,n){"use strict";function o(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}Object.defineProperty(t,"__esModule",{value:!0}),t.getRandom=o;var r=t.fire={width:.8,height:.8,quality:8,color:16777215,noiseAmplitude:.2},i=t.snow={width:50,height:50,segments:64,color:16777215,metalness:.2,roughness:.7,emissive:240,emissiveIntensity:.1,noiseAmplitude:1.2},a=t.tornado={size:.8,angle:Math.PI/8,rotationRadius:.25,rotationSpeed:-.9},s=t.flakes={size:.07,rotationSpeed:-.03,verticalSpeed:.0016,creationSpeed:.1};t.default={getRandom:o,fire:r,snow:i,tornado:a,flakes:s}},function(e,t,n){"use strict";(function(e){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(16),n(15);var a=n(7),s=o(a),c=n(11),l=o(c),u=n(12),h=o(u),p=n(10),d=o(p),m=n(9),f=o(m),v=n(8),b=o(v),y=function(){function t(){r(this,t),this.scene=new e.Scene,this.camera=new e.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,200),this.camera.position.set(-6,2,30),this.cameraLookAt=new e.Vector3(0,3,0),this.camera.lookAt(this.cameraLookAt),this.camera.canTravelling=!0,this.scene.add(this.camera),this.cameraTest=new e.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,1e3),this.cameraTest.position.set(0,0,20),this.scene.add(this.cameraTest),this.renderer=new e.WebGLRenderer({canvas:document.querySelector("canvas"),antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=e.PCFShadowMap,this.renderer.sortObjects=!1,this.clock=new e.Clock,this.tornadosClock=new e.Clock,this.levitationClock=new e.Clock,this.currentTime=0,this.controls=new e.OrbitControls(this.camera,document.querySelector("canvas")),this.controls.target=this.cameraLookAt,this.controls.enableDamping=!0,this.controls.minDistance=3,this.controls.maxDistance=10,this.controls.minPolarAngle=0,this.controls.maxPolarAngle=Math.PI/2,this.controls.enablePan=!1,this.modelsArr=[],this.texturesArr=[],this.tornadosArr=[],this.musicsArr=[],this.volume=0,this.volumetricScale=.01,this.flakeOpacity=0,this.removeTornado=!0,this.loadElements()}return i(t,[{key:"loadElements",value:function(){var e=this;Promise.all([this.loadModel("./assets/models/model.obj","model"),this.loadMusic("./assets/musics/song.mp3","song"),this.loadTexture("./assets/textures/spirale.jpg","spirale"),this.loadTexture("./assets/textures/fire.png","fireTexture"),this.loadTexture("./assets/textures/bump.jpg","bumpMap"),this.loadTexture("./assets/textures/fire-rgb.jpg","fireSpritesheet"),this.loadTexture("./assets/textures/fire-alpha.jpg","fireAlpha"),this.loadTexture("./assets/textures/flake-1.png","flake1Texture"),this.loadTexture("./assets/textures/flake-2.png","flake2Texture"),this.loadTexture("./assets/textures/flake-3.png","flake3Texture"),this.loadTexture("./assets/textures/flake-4.png","flake4Texture"),this.loadTexture("./assets/textures/flake-5.png","flake5Texture"),this.loadTexture("./assets/textures/flake-6.png","flake6Texture"),this.loadTexture("./assets/textures/flake-6.png","flake6Texture"),this.loadTexture("./assets/textures/snowParticle.png","snowParticle"),this.loadTexture("./assets/textures/background-sky.jpg","backgroundSky"),this.loadTexture("./assets/textures/background-stars.png","backgroundStars"),this.loadTexture("./assets/textures/background-mountains.png","backgroundMountains"),this.loadTexture("./assets/textures/snow-normals.jpg","snowNormals")]).then(function(){document.querySelector(".loader").style.display="none",document.querySelector(".startButton").addEventListener("click",e.launchScene.bind(e))})}},{key:"loadModel",value:function(t,n){var o=this;return new Promise(function(r,i){(new e.OBJLoader).load(t,function(e){o.modelsArr[n]=e,r()})})}},{key:"loadTexture",value:function(t,n){var o=this;return new Promise(function(r,i){(new e.TextureLoader).load(t,function(e){o.texturesArr[n]=e,r()})})}},{key:"loadMusic",value:function(t,n){var o=this;return new Promise(function(r,i){var a=new e.AudioListener;o.camera.add(a),o.sound=new e.Audio(a),(new e.AudioLoader).load(t,function(e){o.sound.setBuffer(e),o.musicsArr[n]=o.sound,r()})})}},{key:"generateTornados",value:function(){for(var e=0,t=0;e<2;e++,t+=Math.PI){var n=void 0,o=void 0;0===e?(n=[this.texturesArr.flake1Texture,this.texturesArr.flake2Texture,this.texturesArr.flake3Texture],o=1):(n=[this.texturesArr.flake4Texture,this.texturesArr.flake5Texture,this.texturesArr.flake6Texture],o=2.5);var r=new l.default(n,t,o);r.position.y=1.45,this.tornadosArr.push(r)}}},{key:"generateSnow",value:function(){var e=new s.default(this.texturesArr.snowNormals);e.receiveShadow=!0,e.rotation.x=Math.PI/2,this.scene.add(e)}},{key:"launchScene",value:function(){var t=this;document.querySelector(".explications").style.display="none",this.backgroundSky=new e.Mesh(new e.SphereBufferGeometry(20,32,32),new e.MeshBasicMaterial({map:this.texturesArr.backgroundSky})),this.backgroundSky.geometry.scale(-1,1,1),this.backgroundSky.rotation.y=Math.PI/2,this.scene.add(this.backgroundSky),this.backgroundMountains=new e.Mesh(new e.SphereBufferGeometry(18,32,32),new e.MeshBasicMaterial({map:this.texturesArr.backgroundMountains,transparent:!0})),this.backgroundMountains.geometry.scale(-1,1,1),this.backgroundMountains.rotation.y=Math.PI/2,this.backgroundMountains.position.y+=2,this.scene.add(this.backgroundMountains),this.backgroundStars=new e.Mesh(new e.SphereBufferGeometry(19,32,32),new e.MeshBasicMaterial({map:this.texturesArr.backgroundStars,transparent:!0})),this.backgroundStars.geometry.scale(-1,1,1),this.cubeCamera=new e.CubeCamera(1,1e3,256),this.cubeCamera.renderTarget.texture.minFilter=e.LinearMipMapLinearFilter,this.cubeCamera.update(this.renderer,this.scene),this.scene.remove(this.backgroundMountains),this.scene.add(this.backgroundStars),this.scene.add(this.backgroundMountains.clone());var n=new e.Color(61);this.scene.fog=new e.Fog(n,0,5);var o=new e.AmbientLight(16777215,.5);this.scene.add(o);var r=new e.PointLight(16777215,1,90);r.position.set(15,30,30),r.castShadow=!0,r.shadow.mapSize.width=2048,r.shadow.mapSize.height=2048,r.shadow.radius=3,this.scene.add(r);var i=new e.PointLight(16777215,1,25);i.position.set(0,20,0),this.scene.add(i),this.musicsArr.song.setLoop(!0),this.musicsArr.song.setVolume(this.volume),this.musicsArr.song.play();var a=this.modelsArr.model.children.slice(Math.max(this.modelsArr.model.children.length-4,1));this.sphere=new d.default(a,this.texturesArr.spirale,this.cubeCamera.renderTarget.texture),this.scene.add(this.sphere);var s=this.modelsArr.model.children;this.socle=new f.default(s,this.camera,this.startTornados),this.scene.add(this.socle),this.generateSnow(),this.snowWind=new b.default(this.texturesArr.snowParticle),this.scene.add(this.snowWind),this.volumetricFire=new h.default(this.texturesArr.fireTexture),this.volumetricFire.position.y=2.9,this.volumetricFire.scale.set(this.volumetricScale,this.volumetricScale,this.volumetricScale),this.sphere.add(this.volumetricFire),this.generateTornados(),this.tornadosArr.forEach(function(e){t.sphere.add(e)}),window.addEventListener("click",this.onMouseClick.bind(this),!1),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.update()}},{key:"update",value:function(){var e=this;this.controls.update(),this.clock.getDelta(),this.currentTime=this.clock.elapsedTime,this.camera.position.z>5.5&&this.camera.canTravelling?this.camera.position.z-=.03:this.camera.canTravelling=!1,this.scene.fog.far<40&&(this.scene.fog.far+=.2),this.backgroundStars.rotation.y+=7e-4,this.snowWind.children.forEach(function(t){t.update(e.currentTime)}),this.volumetricFire&&this.volumetricFire.animate(this.currentTime),!1===this.removeVolumetricFire?(this.volumetricScale+=.02*(1-this.volumetricFire.scale.y),this.volumetricFire.scale.set(this.volumetricScale,this.volumetricScale,this.volumetricScale),this.volumetricFire.position.y=2.3+-.5*(1-this.volumetricScale)):(this.volumetricScale+=.02*(.001-this.volumetricFire.scale.x),this.volumetricFire.scale.set(this.volumetricScale,this.volumetricScale,this.volumetricScale)),this.volumetricFire.position.y=2.3+-.5*(.001-this.volumetricScale),this.tornadosClock.getDelta(),this.tornadosCurrentTime=this.tornadosClock.elapsedTime-this.tornadosStartTime,this.removeTornado?this.tornadosArr.forEach(function(e){e.children.forEach(function(t){t.material&&(t.material.opacity<.1?e.visible=!1:t.material.opacity+=.05*-t.material.opacity)})}):this.tornadosArr.forEach(function(t){t.update(e.tornadosCurrentTime),t.children.forEach(function(e){e.material&&(t.visible=!0,e.material.opacity+=.05*(1-e.material.opacity))})}),this.canLevitate?(this.volume+=.02*(1-this.musicsArr.song.getVolume()),this.musicsArr.song.setVolume(this.volume)):(this.volume+=.02*-this.musicsArr.song.getVolume(),this.musicsArr.song.setVolume(this.volume)),this.levitationClock.getDelta(),this.levitationCurrentTime=this.levitationClock.elapsedTime-this.levitationStartTime,this.sphere.update(this.canLevitate,this.levitationCurrentTime),this.socle.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.update.bind(this))}},{key:"onMouseClick",value:function(){var e=this;this.socle.pushers.forEach(function(t){t.canClick&&(0===t.position.z?(t.position.z-=.05,t.material.color.setHex(65280),"Fire_pusher"===t.name?e.removeVolumetricFire=!1:"Levitate_pusher"===t.name?(e.levitationStartTime=e.levitationClock.getElapsedTime(),e.canLevitate=!0):"Flakes_pusher"===t.name&&(e.tornadosStartTime=e.tornadosClock.getElapsedTime(),e.removeTornado=!1)):(t.position.z+=.05,t.material.color.setHex(16716306),"Fire_pusher"===t.name?e.removeVolumetricFire=!0:"Levitate_pusher"===t.name?e.canLevitate=!1:"Flakes_pusher"===t.name&&(e.removeTornado=!0)))})}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}]),t}();t.default=y}).call(t,n(0))},function(e,t){},function(e,t,n){"use strict";n(3);var o=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(o);window.app=new r.default},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(1),c=function(t){function n(t,i,a){o(this,n);var c=new e.Geometry;c.vertices.push(new e.Vector3);var l=new e.PointsMaterial({transparent:!0,size:s.flakes.size,map:i[(0,s.getRandom)(0,i.length-1)]}),u=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,c,l));return u._creationTime=t,u.flakeRotationSpeed=a,u}return i(n,t),a(n,[{key:"update",value:function(e){this._creationTime+=s.flakes.rotationSpeed*this.flakeRotationSpeed;var t=this.position.y+s.flakes.verticalSpeed,n=t*s.tornado.angle,o=n*Math.cos(this._creationTime),r=n*Math.sin(this._creationTime);this.position.set(o+e.x,t,r+e.z)}}]),n}(e.Points);t.default=c}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(1),c=function(t){function n(t){o(this,n);var i=new e.Geometry;i.vertices.push(new e.Vector3);var a=new e.PointsMaterial({transparent:!0,size:.2,map:t}),s=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i,a));return s.velocity=new e.Vector3(0,0,0),s.gravity=new e.Vector3(0,-1e-4,0),s.acc=new e.Vector3(0,0,0),s}return i(n,t),a(n,[{key:"update",value:function(){this.position.y-=.01,this.position.y<0&&(this.position.y=(0,s.getRandom)(10,20))}}]),n}(e.Points);t.default=c}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=n(1),l=function(t){function n(t){o(this,n);for(var i=new e.PlaneGeometry(c.snow.width,c.snow.height,c.snow.segments,c.snow.segments),a=new e.MeshStandardMaterial({color:c.snow.color,side:e.DoubleSide,normalMap:t,metalness:c.snow.metalness,roughness:c.snow.roughness,emissive:c.snow.emissive,emissiveIntensity:c.snow.emissiveIntensity}),l=new s.default,u=0;u<i.vertices.length;u++){var h=i.vertices[u],p=l.noise3D(.1*h.x,.1*h.y,1);h.z-=Math.abs(p*c.snow.noiseAmplitude)}return r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i,a))}return i(n,t),n}(e.Mesh);t.default=l}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(6),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.particleTexture=e,n.particlesCount=200,n.render(),n}return i(t,e),a(t,[{key:"render",value:function(){for(var e=0;e<this.particlesCount;e++){var t=new c.default(this.particleTexture);t.position.set(),t.position.x=20*Math.random()-10,t.position.y=20*Math.random()-10,t.position.z=20*Math.random()-10,this.add(t)}}}]),t}(e.Group);t.default=l}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(t){function a(t,r,i){n(this,a);var s=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return s.children=t,s.camera=r,s.pusherFunctions=i,s.pushers=[],s.raycaster=new e.Raycaster,s.mouse=new e.Vector2,s.intersects,s.INTERSECTED,s.render(),s}return r(a,t),i(a,[{key:"render",value:function(){var t=this,n=new e.MeshStandardMaterial({color:5986389,roughness:.6,metalness:.3}),o=new e.MeshPhongMaterial({color:11767361,reflectivity:0,specular:15657130,shininess:40,emissive:16777215,emissiveIntensity:.06});this.children.forEach(function(r){"Socle"===r.name?(r.material=n,r.receiveShadow=!0):"Fire"===r.name||"Levitate"===r.name||"Flakes"===r.name?r.material=o:"Fire_pusher"!==r.name&&"Levitate_pusher"!==r.name&&"Flakes_pusher"!==r.name||(r.material=new e.MeshPhongMaterial({color:16716306,transparent:!0,opacity:.9,emissive:16777215,emissiveIntensity:0}),r.canClick=!1,t.pushers.push(r))}),window.addEventListener("mousemove",this.onMouseMove.bind(this),!1)}},{key:"update",value:function(){this.raycaster.setFromCamera(this.mouse,this.camera),this.intersects=this.raycaster.intersectObjects(this.pushers),this.intersects.length>0?this.intersects[0].object!=this.INTERSECTED&&(document.body.style.cursor="pointer",this.INTERSECTED&&(this.INTERSECTED.currentHex=this.INTERSECTED.material.color.getHex(),this.INTERSECTED.material.color.setHex(this.INTERSECTED.currentHex)),this.INTERSECTED=this.intersects[0].object,this.INTERSECTED.canClick=!0,this.INTERSECTED.material.emissiveIntensity=.2):(this.INTERSECTED&&(document.body.style.cursor="auto",this.INTERSECTED.canClick=!1,this.INTERSECTED.material.color.set(this.INTERSECTED.currentHex),this.INTERSECTED.material.emissiveIntensity=0),this.INTERSECTED=null)}},{key:"onMouseMove",value:function(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1}}]),a}(e.Group);t.default=a}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(t){function a(e,t,r){n(this,a);var i=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return i.children=e,i.texture=t,i.envMap=r,i.canFloat=!1,i._minPosition=0,i._maxPosition=.8,i.render(),i}return r(a,t),i(a,[{key:"render",value:function(){var t=this,n=new e.MeshPhongMaterial({color:11767361,reflectivity:0,specular:15657130,shininess:40,emissive:16777215,emissiveIntensity:.06}),o=new e.MeshStandardMaterial({transparent:!0,opacity:.3,metalness:.8,roughness:0,emissive:16777215,emissiveIntensity:.2,envMap:this.envMap,depthWrite:!1});this.children.forEach(function(e){"Sphere"===e.name?(e.material=o,e.castShadow=!0):"Palissade"===e.name?e.material.map=t.texture:e.material=n,t.add(e)})}},{key:"update",value:function(e,t){e?(this.rotation.y+=.005,this.position.y<this._maxPosition&&!this.canFloat?this.position.y+=.005:(this.canFloat=!0,this.position.y+=.005*Math.sin(t))):this.position.y>this._minPosition&&(this.position.y-=.005)}}]),a}(e.Group);t.default=a}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(5),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(1),u=function(e){function t(e,n,i){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.flakesTextures=e,a._positionAngle=n,a.flakeRotationSpeed=i,a._nextTime=l.flakes.creationSpeed,a}return i(t,e),a(t,[{key:"update",value:function(e){var t=this;if(e>=this._nextTime){var n=new c.default(e,this.flakesTextures,this.flakeRotationSpeed);this.add(n),this._nextTime+=l.flakes.creationSpeed}this.children.forEach(function(e){e.position.y>l.tornado.size?t.remove(e):e.update(t.position)}),this.position.set(Math.cos(e*l.tornado.rotationSpeed+this._positionAngle)*l.tornado.rotationRadius,this.position.y,Math.sin(e*l.tornado.rotationSpeed+this._positionAngle)*l.tornado.rotationRadius)}}]),t}(e.Group);t.default=u}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(14),n(13);var s=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.update=n.update.bind(n),n}return i(t,e),a(t,[{key:"animate",value:function(e){this.update(e)}}]),t}(e.Fire);t.default=s}).call(t,n(0))},function(e,t,n){"use strict";(function(e){e.Fire=function(t,n){var o=new e.ShaderMaterial({defines:e.FireShader.defines,uniforms:e.UniformsUtils.clone(e.FireShader.uniforms),vertexShader:e.FireShader.vertexShader,fragmentShader:e.FireShader.fragmentShader,transparent:!0,depthWrite:!1});t.magFilter=t.minFilter=e.LinearFilter,t.wrapS=t.wrapT=e.ClampToEdgeWrapping,o.uniforms.fireTex.value=t,o.uniforms.color.value=n||new e.Color(15658734),o.uniforms.invModelMatrix.value=new e.Matrix4,o.uniforms.scale.value=new e.Vector3(1,1,1),o.uniforms.seed.value=19.19*Math.random(),e.Mesh.call(this,new e.BoxGeometry(1,1,1),o)},e.Fire.prototype=Object.create(e.Mesh.prototype),e.Fire.prototype.constructor=e.Fire,e.Fire.prototype.update=function(e){var t=this.material.uniforms.invModelMatrix.value;this.updateMatrixWorld(),t.getInverse(this.matrixWorld),void 0!==e&&(this.material.uniforms.time.value=e),this.material.uniforms.invModelMatrix.value=t,this.material.uniforms.scale.value=this.scale}}).call(t,n(0))},function(e,t,n){"use strict";(function(e){e.FireShader={defines:{ITERATIONS:"20",OCTIVES:"3"},uniforms:{fireTex:{type:"t",value:null},color:{type:"c",value:null},time:{type:"f",value:0},seed:{type:"f",value:0},invModelMatrix:{type:"m4",value:null},scale:{type:"v3",value:null},noiseScale:{type:"v4",value:new e.Vector4(1,2,1,.3)},magnitude:{type:"f",value:5},lacunarity:{type:"f",value:.2},gain:{type:"f",value:.3}},vertexShader:["varying vec3 vWorldPos;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","vWorldPos = (modelMatrix * vec4(position, 1.0)).xyz;","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform float time;","uniform float seed;","uniform mat4 invModelMatrix;","uniform vec3 scale;","uniform vec4 noiseScale;","uniform float magnitude;","uniform float lacunarity;","uniform float gain;","uniform sampler2D fireTex;","varying vec3 vWorldPos;","vec3 mod289(vec3 x) {","return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec4 mod289(vec4 x) {","return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec4 permute(vec4 x) {","return mod289(((x * 34.0) + 1.0) * x);","}","vec4 taylorInvSqrt(vec4 r) {","return 1.79284291400159 - 0.85373472095314 * r;","}","float snoise(vec3 v) {","const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);","const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);","vec3 i  = floor(v + dot(v, C.yyy));","vec3 x0 = v - i + dot(i, C.xxx);","vec3 g = step(x0.yzx, x0.xyz);","vec3 l = 1.0 - g;","vec3 i1 = min(g.xyz, l.zxy);","vec3 i2 = max(g.xyz, l.zxy);","vec3 x1 = x0 - i1 + C.xxx;","vec3 x2 = x0 - i2 + C.yyy;","vec3 x3 = x0 - D.yyy;","i = mod289(i); ","vec4 p = permute(permute(permute( ","i.z + vec4(0.0, i1.z, i2.z, 1.0))","+ i.y + vec4(0.0, i1.y, i2.y, 1.0)) ","+ i.x + vec4(0.0, i1.x, i2.x, 1.0));","float n_ = 0.142857142857;","vec3  ns = n_ * D.wyz - D.xzx;","vec4 j = p - 49.0 * floor(p * ns.z * ns.z);","vec4 x_ = floor(j * ns.z);","vec4 y_ = floor(j - 7.0 * x_);","vec4 x = x_ * ns.x + ns.yyyy;","vec4 y = y_ * ns.x + ns.yyyy;","vec4 h = 1.0 - abs(x) - abs(y);","vec4 b0 = vec4(x.xy, y.xy);","vec4 b1 = vec4(x.zw, y.zw);","vec4 s0 = floor(b0) * 2.0 + 1.0;","vec4 s1 = floor(b1) * 2.0 + 1.0;","vec4 sh = -step(h, vec4(0.0));","vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;","vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;","vec3 p0 = vec3(a0.xy, h.x);","vec3 p1 = vec3(a0.zw, h.y);","vec3 p2 = vec3(a1.xy, h.z);","vec3 p3 = vec3(a1.zw, h.w);","vec4 norm = taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));","p0 *= norm.x;","p1 *= norm.y;","p2 *= norm.z;","p3 *= norm.w;","vec4 m = max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);","m = m * m;","return 42.0 * dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3)));","}","float turbulence(vec3 p) {","float sum = 0.0;","float freq = 1.0;","float amp = 1.0;","for(int i = 0; i < OCTIVES; i++) {","sum += abs(snoise(p * freq)) * amp;","freq *= lacunarity;","amp *= gain;","}","return sum;","}","vec4 samplerFire (vec3 p, vec4 scale) {","vec2 st = vec2(sqrt(dot(p.xz, p.xz)), p.y);","if(st.x <= 0.0 || st.x >= 1.0 || st.y <= 0.0 || st.y >= 1.0) return vec4(0.0);","p.y -= (seed + time) * scale.w;","p *= scale.xyz;","st.y += sqrt(st.y) * magnitude * turbulence(p);","if(st.y <= 0.0 || st.y >= 1.0) return vec4(0.0);","return texture2D(fireTex, st);","}","vec3 localize(vec3 p) {","return (invModelMatrix * vec4(p, 1.0)).xyz;","}","void main() {","vec3 rayPos = vWorldPos;","vec3 rayDir = normalize(rayPos - cameraPosition);","float rayLen = 0.0288 * length(scale.xyz);","vec4 col = vec4(0.0);","for(int i = 0; i < ITERATIONS; i++) {","rayPos += rayDir * rayLen;","vec3 lp = localize(rayPos);","lp.y += 0.5;","lp.xz *= 2.0;","col += samplerFire(lp, noiseScale);","}","col.a = col.r;","gl_FragColor = col;","}"].join("\n")}}).call(t,n(0))},function(e,t,n){"use strict";(function(e){e.OBJLoader=function(){function t(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var o={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var o=n.clone(0);o.inherited=!0,this.object.materials.push(o)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var o=this.vertices,r=this.object.geometry.vertices;r.push(o[e+0],o[e+1],o[e+2]),r.push(o[t+0],o[t+1],o[t+2]),r.push(o[n+0],o[n+1],o[n+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var o=this.normals,r=this.object.geometry.normals;r.push(o[e+0],o[e+1],o[e+2]),r.push(o[t+0],o[t+1],o[t+2]),r.push(o[n+0],o[n+1],o[n+2])},addColor:function(e,t,n){var o=this.colors,r=this.object.geometry.colors;r.push(o[e+0],o[e+1],o[e+2]),r.push(o[t+0],o[t+1],o[t+2]),r.push(o[n+0],o[n+1],o[n+2])},addUV:function(e,t,n){var o=this.uvs,r=this.object.geometry.uvs;r.push(o[e+0],o[e+1]),r.push(o[t+0],o[t+1]),r.push(o[n+0],o[n+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,o,r,i,a,s,c){var l=this.vertices.length,u=this.parseVertexIndex(e,l),h=this.parseVertexIndex(t,l),p=this.parseVertexIndex(n,l);if(this.addVertex(u,h,p),void 0!==o&&""!==o){var d=this.uvs.length;u=this.parseUVIndex(o,d),h=this.parseUVIndex(r,d),p=this.parseUVIndex(i,d),this.addUV(u,h,p)}if(void 0!==a&&""!==a){var m=this.normals.length;u=this.parseNormalIndex(a,m),h=a===s?u:this.parseNormalIndex(s,m),p=a===c?u:this.parseNormalIndex(c,m),this.addNormal(u,h,p)}this.colors.length>0&&this.addColor(u,h,p)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,o=e.length;n<o;n++)this.addVertexPoint(this.parseVertexIndex(e[n],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,o=this.uvs.length,r=0,i=e.length;r<i;r++)this.addVertexLine(this.parseVertexIndex(e[r],n));for(var a=0,i=t.length;a<i;a++)this.addUVLine(this.parseUVIndex(t[a],o))}};return e.startObject("",!1),e}function n(t){this.manager=void 0!==t?t:e.DefaultLoadingManager,this.materials=null}var o=/^[og]\s*(.+)?/,r=/^mtllib /,i=/^usemtl /;return n.prototype={constructor:n,load:function(t,n,o,r){var i=this,a=new e.FileLoader(i.manager);a.setPath(this.path),a.load(t,function(e){n(i.parse(e))},o,r)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(n){console.time("OBJLoader");var a=new t;-1!==n.indexOf("\r\n")&&(n=n.replace(/\r\n/g,"\n")),-1!==n.indexOf("\\\n")&&(n=n.replace(/\\\n/g,""));for(var s=n.split("\n"),c="",l="",u=[],h="function"==typeof"".trimLeft,p=0,d=s.length;p<d;p++)if(c=s[p],c=h?c.trimLeft():c.trim(),0!==c.length&&"#"!==(l=c.charAt(0)))if("v"===l){var m=c.split(/\s+/);switch(m[0]){case"v":a.vertices.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])),8===m.length&&a.colors.push(parseFloat(m[4]),parseFloat(m[5]),parseFloat(m[6]));break;case"vn":a.normals.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]));break;case"vt":a.uvs.push(parseFloat(m[1]),parseFloat(m[2]))}}else if("f"===l){for(var f=c.substr(1).trim(),v=f.split(/\s+/),b=[],y=0,g=v.length;y<g;y++){var w=v[y];if(w.length>0){var x=w.split("/");b.push(x)}}for(var E=b[0],y=1,g=b.length-1;y<g;y++){var T=b[y],M=b[y+1];a.addFace(E[0],T[0],M[0],E[1],T[1],M[1],E[2],T[2],M[2])}}else if("l"===l){var j=c.substring(1).trim().split(" "),S=[],O=[];if(-1===c.indexOf("/"))S=j;else for(var P=0,k=j.length;P<k;P++){var _=j[P].split("/");""!==_[0]&&S.push(_[0]),""!==_[1]&&O.push(_[1])}a.addLineGeometry(S,O)}else if("p"===l){var f=c.substr(1).trim(),C=f.split(" ");a.addPointGeometry(C)}else if(null!==(u=o.exec(c))){var A=(" "+u[0].substr(1).trim()).substr(1);a.startObject(A)}else if(i.test(c))a.object.startMaterial(c.substring(7).trim(),a.materialLibraries);else if(r.test(c))a.materialLibraries.push(c.substring(7).trim());else{if("s"!==l){if("\0"===c)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+c+'"')}if(u=c.split(" "),u.length>1){var L=u[1].trim().toLowerCase();a.object.smooth="0"!==L&&"off"!==L}else a.object.smooth=!0;var z=a.object.currentMaterial();z&&(z.smooth=a.object.smooth)}a.finalize();var F=new e.Group;F.materialLibraries=[].concat(a.materialLibraries);for(var p=0,d=a.objects.length;p<d;p++){var R=a.objects[p],I=R.geometry,D=R.materials,V="Line"===I.type,N="Points"===I.type,H=!1;if(0!==I.vertices.length){var U=new e.BufferGeometry;U.addAttribute("position",new e.Float32BufferAttribute(I.vertices,3)),I.normals.length>0?U.addAttribute("normal",new e.Float32BufferAttribute(I.normals,3)):U.computeVertexNormals(),I.colors.length>0&&(H=!0,U.addAttribute("color",new e.Float32BufferAttribute(I.colors,3))),I.uvs.length>0&&U.addAttribute("uv",new e.Float32BufferAttribute(I.uvs,2));for(var B=[],G=0,W=D.length;G<W;G++){var Y=D[G],z=void 0;if(null!==this.materials)if(z=this.materials.create(Y.name),!V||!z||z instanceof e.LineBasicMaterial){if(N&&z&&!(z instanceof e.PointsMaterial)){var Z=new e.PointsMaterial({size:10,sizeAttenuation:!1});q.copy(z),z=Z}}else{var q=new e.LineBasicMaterial;q.copy(z),q.lights=!1,z=q}z||(z=V?new e.LineBasicMaterial:N?new e.PointsMaterial({size:1,sizeAttenuation:!1}):new e.MeshPhongMaterial,z.name=Y.name),z.flatShading=!Y.smooth,z.vertexColors=H?e.VertexColors:e.NoColors,B.push(z)}var X;if(B.length>1){for(var G=0,W=D.length;G<W;G++){var Y=D[G];U.addGroup(Y.groupStart,Y.groupCount,G)}X=V?new e.LineSegments(U,B):N?new e.Points(U,B):new e.Mesh(U,B)}else X=V?new e.LineSegments(U,B[0]):N?new e.Points(U,B[0]):new e.Mesh(U,B[0]);X.name=R.name,F.add(X)}}return console.timeEnd("OBJLoader"),F}},n}()}).call(t,n(0))},function(e,t,n){"use strict";(function(e){e.OrbitControls=function(t,n){function o(){return 2*Math.PI/60/60*A.autoRotateSpeed}function r(){return Math.pow(.95,A.zoomSpeed)}function i(e){N.theta-=e}function a(e){N.phi-=e}function s(e){A.object.isPerspectiveCamera?H/=e:A.object.isOrthographicCamera?(A.object.zoom=Math.max(A.minZoom,Math.min(A.maxZoom,A.object.zoom*e)),A.object.updateProjectionMatrix(),B=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),A.enableZoom=!1)}function c(e){A.object.isPerspectiveCamera?H*=e:A.object.isOrthographicCamera?(A.object.zoom=Math.max(A.minZoom,Math.min(A.maxZoom,A.object.zoom/e)),A.object.updateProjectionMatrix(),B=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),A.enableZoom=!1)}function l(e){G.set(e.clientX,e.clientY)}function u(e){K.set(e.clientX,e.clientY)}function h(e){Z.set(e.clientX,e.clientY)}function p(e){W.set(e.clientX,e.clientY),Y.subVectors(W,G).multiplyScalar(A.rotateSpeed);var t=A.domElement===document?A.domElement.body:A.domElement;i(2*Math.PI*Y.x/t.clientHeight),a(2*Math.PI*Y.y/t.clientHeight),G.copy(W),A.update()}function d(e){J.set(e.clientX,e.clientY),Q.subVectors(J,K),Q.y>0?s(r()):Q.y<0&&c(r()),K.copy(J),A.update()}function m(e){q.set(e.clientX,e.clientY),X.subVectors(q,Z).multiplyScalar(A.panSpeed),te(X.x,X.y),Z.copy(q),A.update()}function f(e){}function v(e){e.deltaY<0?c(r()):e.deltaY>0&&s(r()),A.update()}function b(e){switch(e.keyCode){case A.keys.UP:te(0,A.keyPanSpeed),A.update();break;case A.keys.BOTTOM:te(0,-A.keyPanSpeed),A.update();break;case A.keys.LEFT:te(A.keyPanSpeed,0),A.update();break;case A.keys.RIGHT:te(-A.keyPanSpeed,0),A.update()}}function y(e){G.set(e.touches[0].pageX,e.touches[0].pageY)}function g(e){if(A.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);K.set(0,o)}if(A.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);Z.set(r,i)}}function w(e){W.set(e.touches[0].pageX,e.touches[0].pageY),Y.subVectors(W,G).multiplyScalar(A.rotateSpeed);var t=A.domElement===document?A.domElement.body:A.domElement;i(2*Math.PI*Y.x/t.clientHeight),a(2*Math.PI*Y.y/t.clientHeight),G.copy(W),A.update()}function x(e){if(A.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);J.set(0,o),Q.set(0,Math.pow(J.y/K.y,A.zoomSpeed)),s(Q.y),K.copy(J)}if(A.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);q.set(r,i),X.subVectors(q,Z).multiplyScalar(A.panSpeed),te(X.x,X.y),Z.copy(q)}A.update()}function E(e){}function T(e){if(!1!==A.enabled){switch(e.preventDefault(),e.button){case A.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===A.enablePan)return;h(e),I=R.PAN}else{if(!1===A.enableRotate)return;l(e),I=R.ROTATE}break;case A.mouseButtons.MIDDLE:if(!1===A.enableZoom)return;u(e),I=R.DOLLY;break;case A.mouseButtons.RIGHT:if(!1===A.enablePan)return;h(e),I=R.PAN}I!==R.NONE&&(document.addEventListener("mousemove",M,!1),document.addEventListener("mouseup",j,!1),A.dispatchEvent(z))}}function M(e){if(!1!==A.enabled)switch(e.preventDefault(),I){case R.ROTATE:if(!1===A.enableRotate)return;p(e);break;case R.DOLLY:if(!1===A.enableZoom)return;d(e);break;case R.PAN:if(!1===A.enablePan)return;m(e)}}function j(e){!1!==A.enabled&&(f(e),document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",j,!1),A.dispatchEvent(F),I=R.NONE)}function S(e){!1===A.enabled||!1===A.enableZoom||I!==R.NONE&&I!==R.ROTATE||(e.preventDefault(),e.stopPropagation(),A.dispatchEvent(z),v(e),A.dispatchEvent(F))}function O(e){!1!==A.enabled&&!1!==A.enableKeys&&!1!==A.enablePan&&b(e)}function P(e){if(!1!==A.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===A.enableRotate)return;y(e),I=R.TOUCH_ROTATE;break;case 2:if(!1===A.enableZoom&&!1===A.enablePan)return;g(e),I=R.TOUCH_DOLLY_PAN;break;default:I=R.NONE}I!==R.NONE&&A.dispatchEvent(z)}}function k(e){if(!1!==A.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===A.enableRotate)return;if(I!==R.TOUCH_ROTATE)return;w(e);break;case 2:if(!1===A.enableZoom&&!1===A.enablePan)return;if(I!==R.TOUCH_DOLLY_PAN)return;x(e);break;default:I=R.NONE}}function _(e){!1!==A.enabled&&(E(e),A.dispatchEvent(F),I=R.NONE)}function C(e){!1!==A.enabled&&e.preventDefault()}this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:e.MOUSE.LEFT,MIDDLE:e.MOUSE.MIDDLE,RIGHT:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return V.phi},this.getAzimuthalAngle=function(){return V.theta},this.saveState=function(){A.target0.copy(A.target),A.position0.copy(A.object.position),A.zoom0=A.object.zoom},this.reset=function(){A.target.copy(A.target0),A.object.position.copy(A.position0),A.object.zoom=A.zoom0,A.object.updateProjectionMatrix(),A.dispatchEvent(L),A.update(),I=R.NONE},this.update=function(){var n=new e.Vector3,r=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),a=r.clone().inverse(),s=new e.Vector3,c=new e.Quaternion;return function(){var e=A.object.position;return n.copy(e).sub(A.target),n.applyQuaternion(r),V.setFromVector3(n),A.autoRotate&&I===R.NONE&&i(o()),V.theta+=N.theta,V.phi+=N.phi,V.theta=Math.max(A.minAzimuthAngle,Math.min(A.maxAzimuthAngle,V.theta)),V.phi=Math.max(A.minPolarAngle,Math.min(A.maxPolarAngle,V.phi)),V.makeSafe(),V.radius*=H,V.radius=Math.max(A.minDistance,Math.min(A.maxDistance,V.radius)),A.target.add(U),n.setFromSpherical(V),n.applyQuaternion(a),e.copy(A.target).add(n),A.object.lookAt(A.target),!0===A.enableDamping?(N.theta*=1-A.dampingFactor,N.phi*=1-A.dampingFactor,U.multiplyScalar(1-A.dampingFactor)):(N.set(0,0,0),U.set(0,0,0)),H=1,!!(B||s.distanceToSquared(A.object.position)>D||8*(1-c.dot(A.object.quaternion))>D)&&(A.dispatchEvent(L),s.copy(A.object.position),c.copy(A.object.quaternion),B=!1,!0)}}(),this.dispose=function(){A.domElement.removeEventListener("contextmenu",C,!1),A.domElement.removeEventListener("mousedown",T,!1),A.domElement.removeEventListener("wheel",S,!1),A.domElement.removeEventListener("touchstart",P,!1),A.domElement.removeEventListener("touchend",_,!1),A.domElement.removeEventListener("touchmove",k,!1),document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",j,!1),window.removeEventListener("keydown",O,!1)};var A=this,L={type:"change"},z={type:"start"},F={type:"end"},R={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},I=R.NONE,D=1e-6,V=new e.Spherical,N=new e.Spherical,H=1,U=new e.Vector3,B=!1,G=new e.Vector2,W=new e.Vector2,Y=new e.Vector2,Z=new e.Vector2,q=new e.Vector2,X=new e.Vector2,K=new e.Vector2,J=new e.Vector2,Q=new e.Vector2,$=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),U.add(t)}}(),ee=function(){var t=new e.Vector3;return function(e,n){!0===A.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(A.object.up,t)),t.multiplyScalar(e),U.add(t)}}(),te=function(){var t=new e.Vector3;return function(e,n){var o=A.domElement===document?A.domElement.body:A.domElement;if(A.object.isPerspectiveCamera){var r=A.object.position;t.copy(r).sub(A.target);var i=t.length();i*=Math.tan(A.object.fov/2*Math.PI/180),$(2*e*i/o.clientHeight,A.object.matrix),ee(2*n*i/o.clientHeight,A.object.matrix)}else A.object.isOrthographicCamera?($(e*(A.object.right-A.object.left)/A.object.zoom/o.clientWidth,A.object.matrix),ee(n*(A.object.top-A.object.bottom)/A.object.zoom/o.clientHeight,A.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),A.enablePan=!1)}}();A.domElement.addEventListener("contextmenu",C,!1),A.domElement.addEventListener("mousedown",T,!1),A.domElement.addEventListener("wheel",S,!1),A.domElement.addEventListener("touchstart",P,!1),A.domElement.addEventListener("touchend",_,!1),A.domElement.addEventListener("touchmove",k,!1),window.addEventListener("keydown",O,!1),this.update()},e.OrbitControls.prototype=Object.create(e.EventDispatcher.prototype),e.OrbitControls.prototype.constructor=e.OrbitControls,Object.defineProperties(e.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})}).call(t,n(0))}],[4]);